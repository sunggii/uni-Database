# Referential Integrity Constraints
Referential Integrity Constraints à¸„à¸·à¸­
à¸‚à¹‰à¸­à¸à¸³à¸«à¸™à¸”à¹ƒà¸™à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸Šà¸´à¸‡à¸ªà¸±à¸¡à¸žà¸±à¸™à¸˜à¹Œ (Relational Database) à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸„à¸§à¸šà¸„à¸¸à¸¡ à¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸‚à¸­à¸‡à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸žà¸±à¸™à¸˜à¹Œà¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸•à¸²à¸£à¸²à¸‡ à¹‚à¸”à¸¢à¸­à¸²à¸¨à¸±à¸¢ Primary Key (PK) à¹à¸¥à¸° Foreign Key (FK)

## Referential Integrity Constraints à¹ƒà¸Šà¹‰à¸à¸±à¸šà¸­à¸°à¹„à¸£à¸šà¹‰à¸²à¸‡
à¹ƒà¸Šà¹‰à¸à¸³à¸«à¸™à¸”à¸žà¸¤à¸•à¸´à¸à¸£à¸£à¸¡à¹€à¸¡à¸·à¹ˆà¸­
- DELETE à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡à¹à¸¡à¹ˆ (Parent table)
- UPDATE à¸„à¹ˆà¸² Primary Key à¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡à¹à¸¡à¹ˆ

## à¹ƒà¸™ lab à¸™à¸µà¹‰à¹€à¸£à¸²à¸—à¸³à¸­à¸°à¹„à¸£
à¹„à¸”à¹‰à¸¥à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸•à¸²à¸£à¸²à¸‡à¸—à¸µà¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸žà¸±à¸™à¸˜à¹Œà¸à¸±à¸™ à¹à¸¥à¸°à¹„à¸”à¹‰à¸¥à¸­à¸‡à¸à¸³à¸«à¸™à¸” Constraint 3 à¹à¸šà¸š
### 1. no action 
- à¸–à¹‰à¸²à¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡à¸¥à¸¹à¸à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡à¸­à¸¢à¸¹à¹ˆ 
- à¹„à¸¡à¹ˆà¸­à¸™à¸¸à¸à¸²à¸• à¹ƒà¸«à¹‰à¸¥à¸šà¸«à¸£à¸·à¸­à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡à¹à¸¡à¹ˆ

   > ðŸ“Œ à¹ƒà¸Šà¹‰à¹€à¸¡à¸·à¹ˆà¸­: à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸à¸²à¸£à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸³à¸„à¸±à¸à¹‚à¸”à¸¢à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸•à¸±à¹‰à¸‡à¹ƒà¸ˆ
   

### 2. set null 
- à¹€à¸¡à¸·à¹ˆà¸­à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡à¹à¸¡à¹ˆà¸–à¸¹à¸à¸¥à¸šà¸«à¸£à¸·à¸­à¹à¸à¹‰à¹„à¸‚ 
- à¸„à¹ˆà¸² Foreign Key à¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡à¸¥à¸¹à¸ à¸ˆà¸°à¸–à¸¹à¸à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹€à¸›à¹‡à¸™ NULL

    >ðŸ“Œ à¹ƒà¸Šà¹‰à¹€à¸¡à¸·à¹ˆà¸­: à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¹„à¸§à¹‰ à¹à¸•à¹ˆà¹„à¸¡à¹ˆà¸œà¸¹à¸à¸à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹à¸¡à¹ˆà¹à¸¥à¹‰à¸§

### 3. cascade  
- à¹€à¸¡à¸·à¹ˆà¸­à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡à¹à¸¡à¹ˆà¸–à¸¹à¸à¸¥à¸šà¸«à¸£à¸·à¸­à¹à¸à¹‰à¹„à¸‚
- à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡à¸¥à¸¹à¸ à¸ˆà¸°à¸–à¸¹à¸à¸¥à¸šà¸«à¸£à¸·à¸­à¹à¸à¹‰à¹„à¸‚à¸•à¸²à¸¡à¹„à¸›à¸”à¹‰à¸§

    >ðŸ“Œ à¹ƒà¸Šà¹‰à¹€à¸¡à¸·à¹ˆà¸­: à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸ à¹„à¸¡à¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢ à¸«à¸²à¸à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹à¸¡à¹ˆ

### à¹€à¸£à¸´à¹ˆà¸¡à¸ˆà¸²à¸à¸ªà¸£à¹‰à¸²à¸‡ Table
```sql
CREATE SCHEMA demo;
SET search_path TO demo; /*à¹ƒà¸ªà¹ˆà¹„à¸§à¹‰à¸ˆà¸°à¹„à¸”à¹‰à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡ demo.dept  */

CREATE TABLE dept (
    did   INTEGER PRIMARY KEY,
    dname VARCHAR(30) NOT NULL
);

/* DROP TABLE table_name;  à¹€à¸­à¸²à¹„à¸§à¹‰à¸¥à¸š table*/

INSERT INTO dept (did, dname) VALUES
(10, 'compsci'),
(20, 'math'),
(30, 'drama');

CREATE TABLE student (
    sid      INTEGER PRIMARY KEY,
    sname    VARCHAR(30) NOT NULL,
    gradyear INTEGER ,
    majorid  INTEGER NOT NULL,

    CONSTRAINT chk_gradyear_gt_2000
        CHECK (gradyear > 2000),

    CONSTRAINT fk_student_dept
        FOREIGN KEY (majorid)
        REFERENCES dept(did)
);

INSERT INTO student (sid, sname, gradyear, majorid) VALUES
(1, 'joe', 2004, 10),
(2, 'amy', 2004, 20),
(3, 'sue', 2005, 20),
(4, 'bob', 2005, 20),
(5, 'kim', 2003, 30),
(6, 'amy', 2001, 20),
(7, 'art', 2004, 30),
(8, 'pat', 2004, 20),
(9, 'lee', 2004, 10);
```